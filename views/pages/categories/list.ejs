<%
const layout = 'layouts/main';
const helpers = require('../../utils/helpers');
%>

<%- include(layout, {
    body: `
        <div class="categories-page">
            <div class="container">
                <div class="page-header">
                    <h1 class="page-title">Kategori YÃ¶netimi</h1>
                    <p class="page-subtitle">Sistemdeki kategorileri yÃ¶netin ve yeni kategoriler ekleyin</p>
                </div>

                <!-- Add Category Form -->
                <div class="add-category-section">
                    <h2 class="section-title">Yeni Kategori Ekle</h2>
                    <form action="/categories" method="POST" class="category-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name" class="form-label">Kategori AdÄ± *</label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    class="form-input" 
                                    placeholder="Ã–rn: Elektronik"
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="description" class="form-label">AÃ§Ä±klama</label>
                                <input 
                                    type="text" 
                                    id="description" 
                                    name="description" 
                                    class="form-input" 
                                    placeholder="Kategori aÃ§Ä±klamasÄ±"
                                >
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">Kategori Ekle</button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Categories Table -->
                <div class="categories-section">
                    <h2 class="section-title">Mevcut Kategoriler</h2>
                    
                    <% if (categories.length === 0) { %>
                        <div class="empty-state">
                            <div class="empty-icon">ðŸ“‚</div>
                            <h3 class="empty-title">Kategori BulunamadÄ±</h3>
                            <p class="empty-description">
                                HenÃ¼z hiÃ§ kategori eklenmemiÅŸ. YukarÄ±daki formu kullanarak ilk kategoriyi ekleyin.
                            </p>
                        </div>
                    <% } else { %>
                        <div class="table-container">
                            <table class="categories-table">
                                <thead>
                                    <tr>
                                        <th>Kategori AdÄ±</th>
                                        <th>AÃ§Ä±klama</th>
                                        <th>ÃœrÃ¼n SayÄ±sÄ±</th>
                                        <th>Ä°ÅŸlemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% categories.forEach(function(category) { %>
                                        <tr>
                                            <td class="category-name">
                                                <strong><%= category.name %></strong>
                                            </td>
                                            <td class="category-description">
                                                <%= category.description || 'AÃ§Ä±klama yok' %>
                                            </td>
                                            <td class="product-count">
                                                <span class="count-badge"><%= category.productCount %> Ã¼rÃ¼n</span>
                                            </td>
                                            <td class="category-actions">
                                                <a 
                                                    href="/products?category=<%= category._id %>" 
                                                    class="btn btn-secondary btn-sm"
                                                >
                                                    ÃœrÃ¼nleri GÃ¶r
                                                </a>
                                                <form 
                                                    action="/categories/<%= category._id %>/delete" 
                                                    method="POST" 
                                                    class="delete-form"
                                                    onsubmit="return confirm('Bu kategoriyi silmek istediÄŸinizden emin misiniz?')"
                                                >
                                                    <button type="submit" class="btn btn-danger btn-sm">Sil</button>
                                                </form>
                                            </td>
                                        </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    `
}) %>