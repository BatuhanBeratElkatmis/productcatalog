<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | <%= constants.APP_NAME %></title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <meta name="description" content="<%= constants.APP_NAME %> - En kaliteli √ºr√ºnler en uygun fiyatlarla">
    <meta name="keywords" content="√ºr√ºn, katalog, alƒ±≈üveri≈ü, elektronik, moda, spor">
</head>
<body>
    <%- include('../../partials/header') %>
    <%- include('../../partials/navbar') %>
    <main class="main-content">
        <% if (typeof error !== 'undefined' && error) { %>
            <div class="alert alert-error"><strong>Hata!</strong> <%= error %></div>
        <% } %>
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
            <div class="alert alert-error">
                <strong>Hatalar:</strong>
                <ul><% errors.forEach(function(error) { %><li><%= error %></li><% }); %></ul>
            </div>
        <% } %>

        <div class="products-page">
            <div class="container">
                <div class="page-header">
                    <h1 class="page-title">
                        <% if (typeof searchQuery !== 'undefined') { %>
                            "<%= searchQuery %>" Arama Sonu√ßlarƒ±
                        <% } else if (filters.category && filters.category !== 'all') { %>
                            <% 
                                const category = categories.find(cat => cat.slug === filters.category);
                                const categoryName = category ? category.name : filters.category;
                            %>
                            <%= categoryName %> √úr√ºnleri
                        <% } else { %>
                            T√ºm √úr√ºnler
                        <% } %>
                    </h1>
                    <p class="page-subtitle">
                        <% if (typeof searchQuery !== 'undefined') { %>
                            <%= pagination.total %> √ºr√ºn bulundu
                        <% } else { %>
                            Toplam <%= pagination.total %> √ºr√ºn
                        <% } %>
                    </p>
                </div>

                <div class="products-layout">
                    <!-- Filter Sidebar -->
                    <div class="products-sidebar">
                        <%- include('../../partials/filter-sidebar', { 
                            categories, 
                            filters, 
                            sortOptions, 
                            currentSort, 
                            brands
                        }) %>
                    </div>

                    <!-- Products Grid -->
                    <div class="products-main">
                        <% if (products.length === 0) { %>
                            <div class="empty-state">
                                <div class="empty-icon">üîç</div>
                                <h3 class="empty-title">√úr√ºn Bulunamadƒ±</h3>
                                <p class="empty-description">
                                    Arama kriterlerinize uygun √ºr√ºn bulunamadƒ±. Filtreleri temizleyip tekrar deneyin.
                                </p>
                                <a href="/products" class="btn btn-primary">T√ºm √úr√ºnleri G√∂r</a>
                            </div>
                        <% } else { %>
                            <div class="products-grid">
                                <% products.forEach(function(product) { %>
                                    <%- include('../../partials/product-card', { product }) %>
                                <% }); %>
                            </div>

                            <!-- Pagination -->
                            <%- include('../../partials/pagination', { 
                                pagination, 
                                currentUrl: '/products',
                                query: filters
                            }) %>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <%- include('../../partials/footer') %>
    <script src="/js/main.js"></script>
</body>
</html>
