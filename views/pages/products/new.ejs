<%
const layout = 'layouts/main';
%>

<%- include(layout, {
    body: `
        <div class="product-form-page">
            <div class="container">
                <div class="page-header">
                    <h1 class="page-title">Yeni Ürün Ekle</h1>
                    <p class="page-subtitle">Yeni ürün bilgilerini aşağıdaki form aracılığıyla ekleyin</p>
                </div>

                <div class="form-container">
                    <form action="/products/new" method="POST" class="product-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name" class="form-label">Ürün Adı *</label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    class="form-input" 
                                    value="<%= product.name || '' %>"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="brand" class="form-label">Marka *</label>
                                <input 
                                    type="text" 
                                    id="brand" 
                                    name="brand" 
                                    class="form-input" 
                                    value="<%= product.brand || '' %>"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="price" class="form-label">Fiyat (₺) *</label>
                                <input 
                                    type="number" 
                                    id="price" 
                                    name="price" 
                                    class="form-input" 
                                    step="0.01"
                                    min="0"
                                    value="<%= product.price || '' %>"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="category" class="form-label">Kategori *</label>
                                <select id="category" name="category" class="form-select" required>
                                    <option value="">Kategori Seçin</option>
                                    <% categories.forEach(function(category) { %>
                                        <option 
                                            value="<%= category._id %>"
                                            <%= product.category === category._id ? 'selected' : '' %>
                                        >
                                            <%= category.name %>
                                        </option>
                                    <% }); %>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="stock" class="form-label">Stok Miktarı *</label>
                                <input 
                                    type="number" 
                                    id="stock" 
                                    name="stock" 
                                    class="form-input" 
                                    min="0"
                                    value="<%= product.stock || 0 %>"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="rating" class="form-label">Puan (0-5)</label>
                                <input 
                                    type="number" 
                                    id="rating" 
                                    name="rating" 
                                    class="form-input" 
                                    step="0.1"
                                    min="0"
                                    max="5"
                                    value="<%= product.rating || 0 %>"
                                >
                            </div>

                            <div class="form-group full-width">
                                <label for="description" class="form-label">Açıklama *</label>
                                <textarea 
                                    id="description" 
                                    name="description" 
                                    class="form-textarea" 
                                    rows="4"
                                    required
                                ><%= product.description || '' %></textarea>
                            </div>

                            <div class="form-group full-width">
                                <label for="images" class="form-label">Resim URL'leri (her satıra bir URL)</label>
                                <textarea 
                                    id="images" 
                                    name="images" 
                                    class="form-textarea" 
                                    rows="3"
                                    placeholder="https://example.com/image1.jpg&#10;https://example.com/image2.jpg"
                                ><%= typeof product.images !== 'undefined' && Array.isArray(product.images) ? product.images.join('&#10;') : (product.images || '') %></textarea>
                            </div>

                            <div class="form-group full-width">
                                <label for="features" class="form-label">Özellikler (her satıra bir özellik)</label>
                                <textarea 
                                    id="features" 
                                    name="features" 
                                    class="form-textarea" 
                                    rows="3"
                                    placeholder="Hızlı şarj&#10;Suya dayanıklı&#10;Kablosuz şarj"
                                ><%= typeof product.features !== 'undefined' && Array.isArray(product.features) ? product.features.join('&#10;') : (product.features || '') %></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <a href="/products" class="btn btn-secondary">İptal</a>
                            <button type="submit" class="btn btn-primary">Ürünü Ekle</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    `
}) %>